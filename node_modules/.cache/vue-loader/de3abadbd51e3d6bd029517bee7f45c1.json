{"remainingRequest":"/Users/ssabi/Desktop/comento/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ssabi/Desktop/comento/src/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ssabi/Desktop/comento/src/components/Home.vue","mtime":1615281410968},{"path":"/Users/ssabi/Desktop/comento/node_modules/cache-loader/dist/cjs.js","mtime":1614759376163},{"path":"/Users/ssabi/Desktop/comento/node_modules/babel-loader/lib/index.js","mtime":1614759376187},{"path":"/Users/ssabi/Desktop/comento/node_modules/cache-loader/dist/cjs.js","mtime":1614759376163},{"path":"/Users/ssabi/Desktop/comento/node_modules/vue-loader/lib/index.js","mtime":1614759383779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwR2V0dGVycywgbWFwQWN0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IEZlZWQgZnJvbSAnLi9GZWVkJwppbXBvcnQgQ2F0ZWdvcnkgZnJvbSAnLi9DYXRlZ29yeScKaW1wb3J0IEFkdmVydGlzZW1lbnQgZnJvbSAnLi9BZHZlcnRpc2VtZW50JwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0hvbWUnLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgaW86IG51bGwsCiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IDAsCiAgICAgICAgICAgIG9yZGVyczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICLsmKTrpoTssKjsiJwiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYXNjJywKICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICLrgrTrprzssKjsiJwiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnZGVzYycsCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIEZlZWQsCiAgICAgICAgQ2F0ZWdvcnksCiAgICAgICAgQWR2ZXJ0aXNlbWVudCwKICAgIH0sCiAgICBjb21wdXRlZDp7CiAgICAgICAgLi4ubWFwR2V0dGVycyhbImZlZWRzIiwgIm5leHRQYWdlVXJsIiwgImFkcyIsICJkZXRhaWwiXSksCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoWyJmZXRjaFBhZ2VzIiwgImFkZFBhZ2VzIiwgInNldE9yZGVyIiwgImZldGNoRGV0YWlsIl0pLAogICAgICAgIHRvZ2dsZUFjdGl2ZShpKXsKICAgICAgICAgICB0aGlzLm9yZGVycy5mb3JFYWNoKChvcmRlciwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgb3JkZXIuYWN0aXZlID0gKGluZGV4ID09PSBpKTsKCiAgICAgICAgICAgICAgIGlmKG9yZGVyLmFjdGl2ZSkgdGhpcy5zZXRPcmRlcihvcmRlci52YWx1ZSk7CiAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG1vdmVEZXRhaWwoaWQpewogICAgICAgICAgICB0aGlzLmZldGNoRGV0YWlsKGlkKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ0RldGFpbCcsCiAgICAgICAgICAgICAgICBwYXJhbXM6ewogICAgICAgICAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIGlmKHRoaXMuZmVlZHMubGVuZ3RoID09IDApIHRoaXMuZmV0Y2hQYWdlcygpOwogICAgfSwKICAgIG1vdW50ZWQoKXsKICAgICAgICBjb25zdCBpbyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHsKICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsKICAgICAgICAgICAgICAgIGlmKGVudHJ5LmlzSW50ZXJzZWN0aW5nKXsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlbnRyeS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKHRhcmdldCk7CgogICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLm5leHRQYWdlVXJsKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGFnZXMoKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LCB7dGhyZXNob2xkOiAxLjB9KTsKCiAgICAgICAgdGhpcy5pbyA9IGlvOwogICAgICAgIGNvbnN0IGxhc3RDaGlsZCA9IHRoaXMuJHJlZnMubGFzdENoaWxkOwoKICAgICAgICBpZihsYXN0Q2hpbGQpewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlvLm9ic2VydmUobGFzdENoaWxkKTsKICAgICAgICAgICAgfSwgMTAwMCkgOwogICAgICAgIH0KICAgIH0sCiAgICB1bm1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5pby5kaXNjb25uZWN0KCk7CiAgICB9LAp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"card-wrapper\">\n            <div class=\"filter-container\">\n            <div class=\"flex flex-row flex-v-middle flex-between mb-15\">\n                <ul class=\"radio-nav-group\">\n                    <li v-for=\"(order, index) in orders\" \n                        v-bind:class=\"{active: order.active}\" \n                        @click=\"toggleActive(index)\"\n                        v-bind:key=\"index\"\n                        >\n                            {{order.text}}\n                    </li>\n                </ul>\n                <button class=\"btn btn-sm\" @click=\"showModal = true\"> <span class=\"text-caption\">필터</span></button>\n                </div>\n            </div>\n            <section>\n                <template v-for=\"(feed, index) in feeds\">\n                    <Feed v-if=\"index == 0 || index % 4 != 0\" v-bind:key=\"feed.id\" v-bind:feed=\"feed\" @click.native=\"moveDetail(feed.id)\" />\n                    <template v-else-if=\"index > 0 && index % 4 == 0\">\n                        <Advertisement v-bind:key=\"'ad'+feed.id\" v-bind:ad=\"ads[index]\" />\n                        <Feed v-bind:key=\"feed.id\" v-bind:feed=\"feed\" @click.native=\"moveDetail(feed.id)\" />\n                    </template>\n                </template>\n                <div ref=\"lastChild\">\n                </div>\n            </section>\n        </div>\n        <div class=\"sider\">\n            <nav class=\"sider-nav\">\n                <button class=\"btn-green\">로그인</button>\n            </nav>\n        </div>\n        <Category v-if=\"showModal\" @close=\"showModal = false\"/>\n    </div>\n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex'\nimport Feed from './Feed'\nimport Category from './Category'\nimport Advertisement from './Advertisement'\n\nexport default {\n    name: 'Home',\n    data(){\n        return{\n            io: null,\n            selectedIndex: 0,\n            orders: [\n                {\n                    text: \"오름차순\",\n                    value: 'asc',\n                    active: true,\n                },\n                {\n                    text: \"내림차순\",\n                    value: 'desc',\n                    active: false,\n                }\n            ],\n            showModal: false,\n        }\n    },\n    components: {\n        Feed,\n        Category,\n        Advertisement,\n    },\n    computed:{\n        ...mapGetters([\"feeds\", \"nextPageUrl\", \"ads\", \"detail\"]),\n    },\n    methods: {\n        ...mapActions([\"fetchPages\", \"addPages\", \"setOrder\", \"fetchDetail\"]),\n        toggleActive(i){\n           this.orders.forEach((order, index) => {\n               order.active = (index === i);\n\n               if(order.active) this.setOrder(order.value);\n           })\n        },\n        moveDetail(id){\n            this.fetchDetail(id);\n            this.$router.push({\n                name: 'Detail',\n                params:{\n                    id: id\n                }\n            });\n        }\n    },\n    created(){\n        if(this.feeds.length == 0) this.fetchPages();\n    },\n    mounted(){\n        const io = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                if(entry.isIntersecting){\n                    const target = entry.target;\n                    observer.unobserve(target);\n\n                    if(!this.nextPageUrl) return;\n\n                    this.addPages();\n                    setTimeout(()=>{\n                        observer.observe(target);\n                    }, 1000);\n                }\n            })\n        }, {threshold: 1.0});\n\n        this.io = io;\n        const lastChild = this.$refs.lastChild;\n\n        if(lastChild){\n            setTimeout(() => {\n                io.observe(lastChild);\n            }, 1000) ;\n        }\n    },\n    unmounted() {\n        this.io.disconnect();\n    },\n}\n</script>"]}]}